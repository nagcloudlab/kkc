########## [ACTIVE-ACTIVE / MULTI-MASTER] ##########

# ENABLE ACTIVE REPLICA MODE (BIDIRECTIONAL REPLICATION)
# Accept writes locally and from peers; continue operating if a link drops
active-replica yes

# EXPLICITLY ALLOW WRITES ON THIS NODE
# Active-Replica implies this, but keep explicit for clarity
replica-read-only no

# ENABLE MULTI-MASTER BEHAVIOR
# Each node can accept writes; updates flow to all connected masters
multi-master yes

# DEFINE PEER MASTERS TO FORM THE ACTIVE-ACTIVE TOPOLOGY
# Add one 'replicaof' line per peer (do NOT point to self)
# Example: two-node A/A
#   On node A → replicaof 10.0.0.12 6379
#   On node B → replicaof 10.0.0.11 6379
replicaof m1 6379

# IF PEERS REQUIRE AUTHENTICATION, PROVIDE THE PASSWORD USED BY THOSE MASTERS
# masterauth StrongClusterPass

# SIZE THE REPLICATION BACKLOG TO ABSORB NETWORK HICCUPS WITHOUT FULL RESYNC
# Increase for high write rates or inter-region links
repl-backlog-size 128mb

# KEEP THE BACKLOG EVEN IF ALL PEERS DISCONNECT (SECONDS)
# Allows peers to return and catch up without a full sync
repl-backlog-ttl 3600

# ANNOUNCE THIS NODE’S EXTERNAL ADDRESS IF RUNNING BEHIND NAT/CONTAINERS
# replica-announce-ip 10.0.0.10
# replica-announce-port 6379

# NOTE ON CONFLICTS:
# Active-Active uses last-write-wins based on timestamps.
# Ensure reasonably synchronized clocks (e.g., NTP) across nodes.

